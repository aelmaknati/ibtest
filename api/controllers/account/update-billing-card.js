module.exports={friendlyName:"Update billing card",description:"Update the credit card for the logged-in user.",inputs:{stripeToken:{type:"string",example:"tok_199k3qEXw14QdSnRwmsK99MH",description:"The single-use Stripe Checkout token identifier representing the user's payment source (i.e. credit card.)",extendedDescription:'Omit this (or use "") to remove this user\'s payment source.',whereToGet:{description:"This Stripe.js token is provided to the front-end (client-side) code after completing a Stripe Checkout or Stripe Elements flow."}},billingCardLast4:{type:"string",example:"4242",description:"Omit if removing card info.",whereToGet:{description:"Credit card info is provided by Stripe after completing the checkout flow."}},billingCardBrand:{type:"string",example:"visa",description:"Omit if removing card info.",whereToGet:{description:"Credit card info is provided by Stripe after completing the checkout flow."}},billingCardExpMonth:{type:"string",example:"08",description:"Omit if removing card info.",whereToGet:{description:"Credit card info is provided by Stripe after completing the checkout flow."}},billingCardExpYear:{type:"string",example:"2023",description:"Omit if removing card info.",whereToGet:{description:"Credit card info is provided by Stripe after completing the checkout flow."}}},fn:async function({stripeToken:stripeToken,billingCardLast4:billingCardLast4,billingCardBrand:billingCardBrand,billingCardExpMonth:billingCardExpMonth,billingCardExpYear:billingCardExpYear}){var stripeCustomerId=await sails.helpers.stripe.saveBillingInfo.with({stripeCustomerId:this.req.me.stripeCustomerId,token:stripeToken||""}).timeout(5e3).retry();await User.updateOne({id:this.req.me.id}).set({stripeCustomerId:stripeCustomerId,hasBillingCard:!!stripeToken,billingCardBrand:stripeToken?billingCardBrand:"",billingCardLast4:stripeToken?billingCardLast4:"",billingCardExpMonth:stripeToken?billingCardExpMonth:"",billingCardExpYear:stripeToken?billingCardExpYear:""})}};