module.exports={friendlyName:"Send password recovery email",description:"Send a password recovery notification to the user with the specified email address.",inputs:{emailAddress:{description:"The email address of the alleged user who wants to recover their password.",example:"rydahl@example.com",type:"string",required:!0}},exits:{success:{description:"The email address might have matched a user in the database.  (If so, a recovery email was sent.)"}},fn:async function({emailAddress:emailAddress}){var userRecord=await User.findOne({emailAddress:emailAddress});if(userRecord){var token=await sails.helpers.strings.random("url-friendly");await User.updateOne({id:userRecord.id}).set({passwordResetToken:token,passwordResetTokenExpiresAt:Date.now()+sails.config.custom.passwordResetTokenTTL}),await sails.helpers.sendTemplateEmail.with({to:emailAddress,subject:"Password reset instructions",template:"email-reset-password",templateData:{fullName:userRecord.fullName,token:token}})}}};